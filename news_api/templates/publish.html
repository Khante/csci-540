<h1> Publish </h1>

<form action="/publish/" method="post">
	{{ form.csrf }}
	<div class="form-group">
		<label for="name">Name:</label>
		<input type="text" class="form-control" id="name" name="name">
		<br>
		<label for="channel">Game Channel:</label>
		<input type="text" class="form-control" id="channel" name="channel">
		<br>
		<label for="news">News:</label>
		<input type="text" class="form-control" id="news" name="news">
		<br>
	</div>
    <button name="subscribeBut" type="submit">Publish</button>
</form>

<br>
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}

	{% for message in messages %}
		{% if "Error" not in message[1]: %}
			<div class="alert alert-info">
				<strong>Success! </strong> {{ message[1] }}
			</div>
		{% endif %}

		{% if "Error" in message[1]: %}
			<div class="alert alert-warning">
				{{ message[1] }}
			</div>
		{% endif %}
	{% endfor %}
		{% endif %}
	{% endwith %}

	<h2>Current Messages</h2>
<div>
	<ul>
		{% for k, msg in msgs.items() %}
			<li>{{ k }}:
				<ul>
					{% for m in msg %}
						<li>{{ m }} </li>
					{% endfor %}
				</ul>
			</li>
		{% endfor %}
	</ul>
</div>
